<mvc:View
	xmlns:mvc="sap.ui.core.mvc"
	controllerName="capacityGridUi.view.filter.FilterBar"
	xmlns:f="sap.ui.layout.form"
	xmlns="sap.m"
	xmlns:core="sap.ui.core"
	xmlns:l="sap.ui.layout"
	xmlns:valuehelp="capacityGridUi.reuse.valuehelp"
	height="100%"
>
	<l:FixFlex class="sapUiMediumMarginEnd">
		<l:fixContent>
			<Toolbar>
				<Title
					id="idFilterTitle"
					text="{i18n>FILTER}"
				/>
				<ToolbarSpacer/>
				<Button
					id="idGoButton"
					text="{i18n>GO}"
					type="Emphasized"
					tooltip="{i18n>GO}"
					press="onFilterGo"
				/>
				<Button
					id="idResetButton"
					text="{i18n>RESET}"
					type="Transparent"
					press="onReset"
				/>
				<Button
					id="idCloseButton"
					icon="sap-icon://decline"
					type="Transparent"
					tooltip="{i18n>CLOSE}"
					press="onToggleFilter"
				/>
			</Toolbar>
		</l:fixContent>
		<l:flexContent>
			<ScrollContainer
				height="100%"
				width="100%"
				horizontal="false"
				vertical="true"
			>
				<Panel
					id="idResourceFilterPanel"
					expandable="true"
					expand="onExpandingFilterPanel($event,'ResourceFilterPanel')"
					backgroundDesign="Solid"
				>
					<headerToolbar>
						<Toolbar design="Solid">
							<Title
								id="idResourceTitle"
								text="{i18n>RESOURCE}"
							/>
						</Toolbar>
					</headerToolbar>
					<content>
						<f:SimpleForm
							editable="true"
							layout="ColumnLayout"
							columnsM="1"
							columnsL="1"
							columnsXL="1"
						>
							<f:content>
								<Label
									id="idNameLabel"
									text="{i18n>NAME}"
									labelFor="idName"
								/>
								<valuehelp:MultiInputWithValueHelp
									tokenUpdateAfterChange="onMultiInputTokenUpdate($event,'names')"
									id="idResourceNameFilter"
									submitFixed="onFilterGo"
								/>
								<Label
									id="idResourceOrgLabel"
									text="{i18n>RESOURCE_ORGANIZATION}"
									labelFor="idResourceOrg"
								/>
								<MultiComboBox
									id="idResourceOrg"
									items="{
										path: 'oDataV4>/ResourceOrganizations',
										parameters: {
											$apply: 'groupby((resourceOrganizationDisplayId,resourceOrganizationName))'
										}
									}"
									selectionFinish="onMultiComboBoxKeysUpdate($event,'resourceOrgs')"
								>
									<core:Item
										key="{oDataV4>resourceOrganizationDisplayId}"
										text="{oDataV4>resourceOrganizationName}"
									/>
								</MultiComboBox>
								<Label
									id="idCCLabel"
									text="{i18n>COSTCENTERID}"
									labelFor="idCCOrg"
								/>
								<valuehelp:MultiInputWithValueHelp
									tokenUpdateAfterChange="onMultiInputTokenUpdate($event,'costCenters')"
									id="idResourceCostCenterFilter"
									submitFixed="onFilterGo"
								/>
								<Label
									id="idWorkerTypeLabel"
									text="{i18n>WORKER_TYPE}"
									labelFor="idWorkerTypeFilter"
								/>
								<MultiComboBox
									id="idWorkerTypeFilter"
									items="{oDataV4>/WorkerTypesVH}"
									selectionFinish="onMultiComboBoxKeysUpdate($event,'workerTypes')"
								>
									<core:Item
										key="{oDataV4>workerTypeName}"
										text="{oDataV4>workerTypeName}"
									/>
								</MultiComboBox>
							</f:content>
						</f:SimpleForm>
					</content>
				</Panel>
				<Panel
					id="idUtilizationFilterPanel"
					expandable="true"
					expand="onExpandingFilterPanel($event,'UtilizationFilterPanel')"
					backgroundDesign="Solid"
				>
					<headerToolbar>
						<Toolbar design="Solid">
							<Title
								id="idUtilizationTitle"
								text="{i18n>UTILIZATION}"
							/>
						</Toolbar>
					</headerToolbar>
					<content>
						<l:VerticalLayout width="90%">
							<List
								class="sapUiSmallMarginTop"
								id="UtilizationRangeFilterList"
								items="{filter>/UtilizationFilterRanges}"
								mode="MultiSelect"
								selectionChange="onChange($event,'resourceUtilization')"
								showSeparators="None"
							>
								<items>
									<CustomListItem selected="{filter>Selected}">
										<content>
											<FlexBox
												alignItems="Start"
												justifyContent="SpaceBetween"
											>
												<ObjectStatus
													text="{filter>Text}"
													inverted="true"
													state="{filter>State}"
												/>
											</FlexBox>
										</content>
									</CustomListItem>
								</items>
							</List>
						</l:VerticalLayout>
						<f:SimpleForm
							editable="true"
							layout="ColumnLayout"
							columnsM="1"
							columnsL="1"
							columnsXL="1"
						>
							<f:content>
								<Label
									id="idMinFreeHoursLabel"
									text="{i18n>MIN_FREE_HOURS}"
									labelFor="idMinFreeHours"
								/>
								<Input
									id="idMinFreeHours"
									change="onChange($event,'resourceMinFreeHours')"
									submit="onFilterGo"
									valueState="{= ${filter>/MinFreeHoursValid} ? 'None' : 'Error' }"
									valueStateText="{= ${filter>/MinFreeHoursValid} ? '' : ${i18n>MIN_FREE_HOURS_INVALID} }"
								/>
							</f:content>
						</f:SimpleForm>
					</content>
				</Panel>
				<Panel
					id="idRequestFilterPanel"
					expandable="true"
					expand="onExpandingFilterPanel($event,'RequestFilterPanel')"
					backgroundDesign="Solid"
				>
					<headerToolbar>
						<Toolbar design="Solid">
							<Title
								id="idRequestTitle"
								text="{i18n>REQUEST}"
							/>
						</Toolbar>
					</headerToolbar>
					<content>
						<f:SimpleForm
							editable="true"
							layout="ColumnLayout"
							columnsM="1"
							columnsL="1"
							columnsXL="1"
						>
							<f:content>
								<Label
									id="idProjectLabel"
									text="{i18n>PROJECTID}"
									labelFor="idProjectFilter"
								/>
								<valuehelp:MultiInputWithValueHelp
									tokenUpdateAfterChange="onMultiInputTokenUpdate($event,'projects')"
									id="idProjectFilter"
									submitFixed="onFilterGo"
								/>
								<Label
									id="idCustomerLabel"
									text="{i18n>CUSTOMERID}"
									labelFor="idCustomerFilter"
								/>
								<valuehelp:MultiInputWithValueHelp
									tokenUpdateAfterChange="onMultiInputTokenUpdate($event,'customers')"
									id="idCustomerFilter"
									submitFixed="onFilterGo"
								/>
								<Label
									id="idProjectRoleLabel"
									text="{i18n>PROJECT_ROLE}"
									labelFor="idProjectRoleFilter"
								/>
								<MultiComboBox
									id="idProjectRoleFilter"
									items="{oDataV4>/ProjectRoles}"
									selectionFinish="onMultiComboBoxKeysUpdate($event,'projectRoles')"
								>
									<core:Item
										key="{oDataV4>projectRole_ID}"
										text="{oDataV4>name}"
									/>
								</MultiComboBox>
								<Label
									id="idRequestLabel"
									text="{i18n>REQUESTID}"
									labelFor="idRequestFilter"
								/>
								<valuehelp:MultiInputWithValueHelp
									tokenUpdateAfterChange="onMultiInputTokenUpdate($event,'requests')"
									id="idRequestFilter"
									submitFixed="onFilterGo"
								/>
									<Label
									id="idReferenceObjectLabel"
									text="{i18n>REFERENCE_OBJECT_ID}"
									labelFor="idReferenceObjectFilter"
								/>
								<valuehelp:MultiInputWithValueHelp
									tokenUpdateAfterChange="onMultiInputTokenUpdate($event,'referenceObject')"
									id="idReferenceObjectFilter"
									submitFixed="onFilterGo"
								/>
								<Label
									id="idReferenceObjectTypeLabel"
									text="{i18n>REFERENCE_OBJECT_TYPE}"
									labelFor="idReferenceObjectTypeFilter"
								/>
								<MultiComboBox
									id="idReferenceObjectTypeFilter"
									items="{oDataV4>/ReferenceObjectType}"
									selectionFinish="onMultiComboBoxKeysUpdate($event,'referenceObjectType')"
								>
									<core:Item
										key="{oDataV4>code}"
										text="{oDataV4>name}"
									/>
								</MultiComboBox>
							</f:content>
						</f:SimpleForm>
					</content>
				</Panel>
			</ScrollContainer>
		</l:flexContent>
	</l:FixFlex>
</mvc:View>